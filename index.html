<html>
<head>
	<script src="jquery.js"></script>    
    <style>

        /* apply a natural box layout model to all elements */
        *, *:before, *:after {
            -moz-box-sizing: border-box; 
            -webkit-box-sizing: border-box; 
            box-sizing: border-box;
        }
        
        #bigGrid{
            width:602px;
            height:602px;
            margin:0 auto;
        }
        
        .grid{
            width:200px;
            height:200px;
            display:inline-block;
            border-width:2px!important;
            padding:8px;
            
        }
        
        .square{
            width:60px;
            height:60px;
            display:inline-block;
        }
        
        .position1{
            border-bottom:1px solid #999;
        }
        .position0{
            border-bottom:1px solid #999;
            border-right:1px solid #999;
        }
        .position2{
            border-bottom:1px solid #999;
            border-left:1px solid #999;
        }
        .position3{
            border-right:1px solid #999;
        }
        .position5{
            border-left:1px solid #999;
        }
        .position6{
            border-top:1px solid #999;
            border-right:1px solid #999;
        }
        .position7{
            border-top:1px solid #999;
        }
        .position8{
            border-top:1px solid #999;
            border-left:1px solid #999;
        }
        
        .player1{
            background-color:red;
        }
        .player0{
            background-color:blue;
        }
        .active{
            background-color:#F3F3F3;
        }
        

    </style>
</head>


<body>



    <div id="bigGrid">

    </div>
    
    <script type="text/javascript">
      $(document).ready(function(){

          var currentPlayer = 0;
          var playerGrid = [-1, -1];


            //initial population
            for(var i = 0; i < 9; i++){
                $('#bigGrid').append('<div class="grid position'+i+'"></div>');
            }
            $('.grid').each(function(gridIndex, element){
                for(var i = 0; i < 9; i++){
                    $(element).append('<div class="square position'+i+'"></div>');
                }

                var grid = new smallGrid();

                $(element).children().each(function(squareIndex, element){
                    var square = new Square(this, squareIndex, gridIndex, grid);
                    populateGrid(grid, square);
                });
            });



            


            function smallGrid(type){
                this.winner = 0;
                this.squares = [0, 0, 0, 0, 0, 0, 0, 0, 0];
            }

            function populateGrid(grid, square){
                for(var i =0 ; i < 9; i++){
                    if(grid.squares[i] == 0){
                        grid.squares[i] = square;
                        break;
                    }
                }
            }

            function largeGrid(){
                this.smallGrids = [0, 0, 0, 0, 0, 0, 0, 0, 0];
            }

            function Square(domObject, squareNumber, gridNumber, parentGrid){
                this.domObject = domObject;
                this.grid = parentGrid;
                this.squareNumber = squareNumber;
                this.gridNumber = gridNumber;
                this.winner = -1;

                //to be used in click function
                //var grid = parentGrid;
                //var squareNumber = squareNumber;
                //var gridNumber = gridNumber;
                var winner = this.winner;
                var square = this;


                $(this.domObject).click(function(){
                    
                    //Game Logic

                    //virgin square
                    if(winner == -1 && (gridNumber == playerGrid[currentPlayer] || playerGrid[currentPlayer] == -1)){
                        $(this).addClass('player'+currentPlayer);
                        square.winner = currentPlayer;
                        playerGrid[currentPlayer] = squareNumber;
                        checkWin(parentGrid, square);
                        currentPlayer = (currentPlayer == 1)? 0: 1;
                        $('.grid').removeClass('active');
                        $('.grid.position'+playerGrid[currentPlayer]).addClass('active');
                    }
                });
            }




            function checkWin(grid, square){
                var winCounter = 0; 
                var rowNumber = Math.floor(square.squareNumber/3);
                var colNumber = square.squareNumber%3;




                //horizontal stuff
                for(var i = colNumber+1; i < 3; i++){   //right
                    console.log(square.squareNumber+i);
                    if(grid.squares[square.squareNumber+i].winner == currentPlayer)
                        winCounter++;
                    else break;
                }
                for(var i = colNumber-1; i > -1; i--){   //left
                    console.log(square.squareNumber-i);
                    if(grid.squares[square.squareNumber-i].winner == currentPlayer)
                        winCounter++;
                    else break;
                }
                if(winCounter == 3) alert("Someone Won!!!!");
                winCounter = 0;


                //vertical stuff
                for(var i = rowNumber+1; i < 3; i++){   //down
                    console.log(square.squareNumber+i*3);
                    if(grid.squares[square.squareNumber+i].winner == currentPlayer)
                        winCounter++;
                    else break;
                }
                for(var i = rowNumber-1; i > -1; i--){   //up
                    console.log(square.squareNumber-i*3);
                    if(grid.squares[square.squareNumber-i].winner == currentPlayer)
                        winCounter++;
                    else break;
                }
                if(winCounter == 3) alert("Someone Won!!!!");
                winCounter = 0;


                 /*//left - right

                var currentRow = rowNumber;
                var currentCol = colNumber;

                while(currentRow < 3 && currentCol < 3){
                    if(grid.sqaures[3*currentRow + currentCol].winner == currentPlayer){
                        winCounter++;
                    }
                    else break;
                    currentCol++;
                    currentRow++;
                }
                while(currentRow > -1 && currentCol > -1){
                    if(grid.sqaures[3*currentRow + currentCol] == currentPlayer){
                        winCounter++;
                    }
                    else break;
                    currentCol--;
                    currentRow--;
                }
                if(winCounter == 3) alert("Someone Won!!!!");
                winCounter = 0;

                //right - left
                currentRow = rowNumber;
                currentCol = colNumber;

                while(currentRow < 3 && currentCol > -1){
                    if(grid.sqaures[3*currentRow + currentCol] == currentPlayer){
                        winCounter++;
                    }
                    else break;
                    currentCol--;
                    currentRow++;
                }
                while(currentRow > -1 && currentCol < 3){
                    if(grid.sqaures[3*currentRow + currentCol] == currentPlayer){
                        winCounter++;
                    }
                    else break;
                    currentCol++;
                    currentRow--;
                }
                 if(winCounter == 3) alert("Someone Won!!!!"); */

               

            }

 /*function checkWin(smallGrid, square){
          var smallCoord = square.squareNumber;
          console.log(smallGrid.squares[smallCoord].winner);

          if(smallCoord==0)
          {
            if(smallGrid.squares[1].winner==currentPlayer && smallGrid.squares[2].winner==currentPlayer)
              smallGrid.winner = currentPlayer;
            if(smallGrid.squares[3].winner==currentPlayer && smallGrid.squares[6].winner==currentPlayer)
              smallGrid.winner = currentPlayer;
            if(smallGrid.squares[4].winner==currentPlayer && smallGrid.squares[8].winner==currentPlayer)
              smallGrid.winner = currentPlayer;
          }
          if(smallCoord==1)
          {
            if(smallGrid.squares[0].winner==currentPlayer && smallGrid.squares[2].winner==currentPlayer)
              smallGrid.winner = currentPlayer;
            if(smallGrid.squares[4].winner==currentPlayer && smallGrid.squares[7].winnner==currentPlayer)
              smallGrid.winner = currentPlayer;
          }
          if(smallCoord==2)
          {
            if(smallGrid.squares[0].winner==currentPlayer && smallGrid.squares[1].winner==currentPlayer)
              smallGrid.winner = currentPlayer;
            if(smallGrid.squares[5].winner==currentPlayer && smallGrid.squares[8].winner==currentPlayer)
              smallGrid.winner = currentPlayer;
            if(smallGrid.squares[4].winner==currentPlayer && smallGrid.squares[6].winner==currentPlayer)
              smallGrid.winner = currentPlayer;
          }
          if(smallCoord==3)
          {
            if(smallGrid.squares[4].winner==currentPlayer && smallGrid.squares[5].winner==currentPlayer)
              smallGrid.winner = currentPlayer;
            if(smallGrid.squares[0].winner==currentPlayer && smallGrid.squares[6].winner==currentPlayer)
              smallGrid.winner = currentPlayer;
          }
          if(smallCoord==4)
          {
            if(smallGrid.squares[3].winner==currentPlayer && smallGrid.squares[5].winner==currentPlayer){
              smallGrid.winner = currentPlayer; alert("Hooray!");
            }
            if(smallGrid.squares[1].winner==currentPlayer && smallGrid.squares[7].winner==currentPlayer)
              smallGrid.winner = currentPlayer;
            if(smallGrid.squares[0].winner==currentPlayer && smallGrid.squares[8].winner==currentPlayer)
              smallGrid.winner = currentPlayer;
            if(smallGrid.squares[2].winner==currentPlayer && smallGrid.squares[6].winner==currentPlayer)
              smallGrid.winner = currentPlayer;
          }
          if(smallCoord==5)
          {
            if(smallGrid.squares[3].winner==currentPlayer && smallGrid.squares[4].winner==currentPlayer)
              smallGrid.winner = currentPlayer;
            if(smallGrid.squares[2].winner==currentPlayer && smallGrid.squares[8].winner==currentPlayer)
              smallGrid.winner = currentPlayer;
          }
          if(smallCoord==6)
          {
            if(smallGrid.squares[0].winner==currentPlayer && smallGrid.squares[3].winner==currentPlayer)
              smallGrid.winner = currentPlayer;
            if(smallGrid.squares[7].winner==currentPlayer && smallGrid.squares[8].winner==currentPlayer)
              smallGrid.winner = currentPlayer;
            if(smallGrid.squares[4].winner==currentPlayer && smallGrid.squares[2].winner==currentPlayer)
              smallGrid.winner = currentPlayer;
          }
          if(smallCoord==7)
          {
            if(smallGrid.squares[6].winner==currentPlayer && smallGrid.squares[8].winner==currentPlayer)
              smallGrid.winner = currentPlayer;
            if(smallGrid.squares[1].winner==currentPlayer && smallGrid.squares[4].winner==currentPlayer)
              smallGrid.winner = currentPlayer;
          }
          if(smallCoord==8)
          {
            if(smallGrid.squares[6].winner==currentPlayer && smallGrid.squares[7].winner==currentPlayer)
              smallGrid.winner = currentPlayer;
            if(smallGrid.squares[2].winner==currentPlayer && smallGrid.squares[5].winner==currentPlayer)
              smallGrid.winner = currentPlayer;
            if(smallGrid.squares[0].winner==currentPlayer && smallGrid.squares[4].winner==currentPlayer)
              smallGrid.winner = currentPlayer; 
          }
          
        }*/
          
        


        });



</script>

</body>



</html>